<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button>1</button>
<button>2</button>
<button>3</button>
<button>4</button>
<button>5</button>
<script>
//    var nodes = document.getElementsByTagName( 'button' );
//    for (var i = 0; i < nodes.length; i++) {
//      nodes[i].addEventListener( 'click', function () {
//        console.log( 'You clicked element #' + i );
//      } );
//    }

    /* 修复问题 */
//    var nodes = document.getElementsByTagName( 'button' );
//    for (var i = 0; i < nodes.length; i++) {
//      (function (i) {
//        nodes[i].addEventListener( 'click', function () {
//          console.log( 'You clicked element #' + i );
//        } );
//      })( i );

    var nodes = document.getElementsByTagName( 'button' );
    for (var i = 0; i < nodes.length; i++) {
      nodes[i].addEventListener( 'click', (function (i) {
        console.log( 'You clicked element #' + i );
      })(i) );
    }

</script>
</body>
</html>